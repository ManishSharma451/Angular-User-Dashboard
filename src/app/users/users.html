<div class="container mt-4">

  <div class="d-flex justify-content-between mb-3">
    <h3>Angular User Dashboard</h3>
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addUserModal">
      + Add User
    </button>
  </div>

  <!-- FILTERS -->
  <div class="row mb-3">
    <div class="col">
      <input class="form-control" placeholder="First Name"
        [(ngModel)]="filterFirstName" (input)="applyAll()" />
    </div>
    <div class="col">
      <input class="form-control" placeholder="Last Name"
        [(ngModel)]="filterLastName" (input)="applyAll()" />
    </div>
    <div class="col">
      <select class="form-select" [(ngModel)]="filterClass" (change)="applyAll()">
        <option value="">All Classes</option>
        <option *ngFor="let c of ['1','2','3','4','5']">{{c}}</option>
      </select>
    </div>
    <div class="col">
      <select class="form-select" [(ngModel)]="filterSection" (change)="applyAll()">
        <option value="">All Sections</option>
        <option *ngFor="let s of ['A','B','C']">{{s}}</option>
      </select>
    </div>
  </div>

  <!-- TABLE -->
  <table class="table table-bordered table-hover">
    <thead>
      <tr>
        <th>ID</th>
        <th (dblclick)="sort('firstName')">First Name ↑↓</th>
        <th (dblclick)="sort('lastName')">Last Name ↑↓</th>
        <th (dblclick)="sort('class')">Class ↑↓</th>
        <th (dblclick)="sort('section')">Section ↑↓</th>
        <th>Email</th>
        <th (dblclick)="sort('createdDate')">Created Date ↑↓</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of paginatedUsers">
        <td>{{user.id}}</td>
        <td>{{user.firstName}}</td>
        <td>{{user.lastName}}</td>
        <td>{{user.class}}</td>
        <td>{{user.section}}</td>
        <td>{{user.email}}</td>
        <td>{{user.createdDate | date:'shortDate'}}</td>
      </tr>
    </tbody>
  </table>


<div class="modal fade" id="addUserModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Add New User</h5>
        <button type="button" class="btn-close"></button>
      </div>

      <div class="modal-body">

        <form #userForm="ngForm" (ngSubmit)="addUser(userForm)">

          <input name="firstName" ngModel required
                 class="form-control mb-2"
                 placeholder="First Name">

          <input name="lastName" ngModel required
                 class="form-control mb-2"
                 placeholder="Last Name">

          <select name="class" ngModel required
                  class="form-control mb-2">
            <option value="">Select Class</option>
            <option *ngFor="let c of ['1','2','3','4','5']">
              {{c}}
            </option>
          </select>

          <select name="section" ngModel required
                  class="form-control mb-2">
            <option value="">Select Section</option>
            <option *ngFor="let s of ['A','B','C']">
              {{s}}
            </option>
          </select>

          <input name="email" type="email" ngModel required email
                 class="form-control mb-3"
                 placeholder="Email">

          <button type="submit"
                  class="btn btn-success w-100"
                  [disabled]="userForm.invalid">
            Submit
          </button>
        </form>

      </div>
    </div>
  </div>
</div>


  <!-- PAGINATION -->
  <nav>
    <ul class="pagination">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <button class="page-link" (click)="prevPage()">Previous</button>
      </li>

      <li class="page-item"
          *ngFor="let page of [].constructor(totalPages); let i = index"
          [class.active]="currentPage === i+1">
        <button class="page-link" (click)="goToPage(i+1)">
          {{i+1}}
        </button>
      </li>

      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <button class="page-link" (click)="nextPage()">Next</button>
      </li>
    </ul>
  </nav>

</div>

